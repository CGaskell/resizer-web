<!DOCTYPE html>
%html(lang="en" class="no-js")
	%head
		%meta(charset="utf-8")
		%meta(http-equiv="X-UA-Compatible" content="IE=edge,chrome=1")
		- if @description
			%meta(name="description" content=@description)
		- if @keywords
			%meta(name="keywords" content=@keywords)
		%title
			= @title
			
		%meta(name="viewport" content="width=device-width, initial-scale=1.0")
		
		:plain
			<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
			<link rel="stylesheet" href="/css/1-reset.css?v=2" />
			<link rel="stylesheet" href="/css/2-site.css?v=2" />
			<link rel="stylesheet" href="/css/3-banners.css?v=2" />
			<link rel="stylesheet" href="/css/main.css?v=2" />
			<link rel="stylesheet" href="/js/highlight/styles/vs.css" />
			<!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
			<![endif]-->
		- if @page and @page.lib("jqueryui")
			:plain
				<link rel="stylesheet" href="/css/smoothness/jquery-ui-1.8.16.custom.css"/>
		- if @page and @page.lib("jqueryui")
			:plain
				<link rel="stylesheet" href="/css/jquery.Jcrop.css" />

		%link(href="/articles.xml" rel="alternate" type="application/atom+xml")
		= partial :analytics
		
		%div.site-container
			= partial :header
			%div.main
				= yield
			= partial :footer
		:plain
			<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
			<script>!window.jQuery && document.write(unescape('%3Cscript src="/js/jquery-1.6.2.min.js"%3E%3C/script%3E'))</script>
			<script src="/js/jquery.tools.min.js"></script>
			<script src="/js/highlight/highlight.pack.js"></script>
		- if @page and @page.lib("bxSlider")
			:plain
				<script src="/js/jquery.bxSlider.min.js"></script>
		- if @page and @page.lib("jtools")
			:plain
				<script src="http://cdn.jquerytools.org/1.2.6/tiny/jquery.tools.min.js"></script>
		- if @page and @page.lib("jqueryui")
			:plain
				<script src="/js/jquery-ui-1.8.16.custom.min.js"></script>
		- if @page and @page.lib("jcrop")
			:plain
				<script src="/js/jquery.Jcrop.min.js"></script>
		- if @page and @page.lib("tinybox")
			:plain
				<script src="/js/tinybox.js"></script>
		- if @page and @page.lib("demo")
			:plain
				<script src="/js/demo.js"></script>


		- if @page and @page.lib("uservoice")
			:plain
				<script type="text/javascript">
				  (function() {
				    var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
				    uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/9Io2T4xq0vy769kPEKmJ0w.js';
				    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
				  })();
				</script>
		-if @page and @page.lib("ejunkie")
			:plain
				<script src='http://www.e-junkie.com/ecom/box.js' type='text/javascript'></script>
		-if @page and @page.lib("search")
			:plain
				<script src="http://www.google.com/jsapi" type="text/javascript"></script>
				<script type="text/javascript"> 
				  google.load('search', '1', {language : 'en', style : google.loader.themes.SHINY});
				  var _gaq = _gaq || [];
				  _gaq.push(["_setAccount", "#{@google_analytics_code}\""]);
				  function _trackQuery(control, searcher, query) {
				    var gaQueryParamName = "q";
				    var loc = document.location;
				    var url = [
				      loc.pathname,
				      loc.search,
				      loc.search ? '&' : '?',
				      gaQueryParamName == '' ? 'q' : encodeURIComponent(gaQueryParamName),
				      '=',
				      encodeURIComponent(query)
				    ].join('');
				    _gaq.push(["_trackPageview", url]);
				  }
				  google.setOnLoadCallback(function() {
				    var customSearchControl = new google.search.CustomSearchControl('005556834036073640702:ds3gmqyjham');
				    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
				    customSearchControl.setSearchStartingCallback(null, _trackQuery);
				    customSearchControl.draw('cse');
				  }, true);
				</script>
		-if @page and @page.lib("plusone")
			:plain
				<!-- Place this tag in your head or just before your close body tag -->
				<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
		:plain
			<script src="/js/script.js"></script>
		:plain
			window._idl = {};
			_idl.variant = "banner";
			(function() {
			    var idl = document.createElement('script');
			    idl.type = 'text/javascript';
			    idl.async = true;
			    idl.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'members.internetdefenseleague.org/include/?url=' + (_idl.url || '') + '&campaign=' + (_idl.campaign || '') + '&variant=' + (_idl.variant || 'banner');
			    document.getElementsByTagName('body')[0].appendChild(idl);
			})();

